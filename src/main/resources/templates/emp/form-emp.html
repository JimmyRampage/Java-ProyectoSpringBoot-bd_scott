<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- BootStrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
      crossorigin="anonymous"
    />
    <title>Inicio</title>
  </head>
  <body class="d-flex flex-column min-vh-100">
    <!-- NAVBAR -->
    <div th:replace="~{fragments/navbar :: navbar}"></div>

    <!-- HEADER -->
    <th:block th:with="tituloPagina=${editMode == 'true' ? 'Edit Employee' : 'Create new Employee'}">
      <div th:replace="~{fragments/header :: header(title=${tituloPagina})}"></div>
    </th:block>

    <main>
      <div class="container">
        <form
          th:action="${editMode == 'true'} ? @{/emp/update} : @{/emp/saveEmp}"
          th:method="POST"
          th:object="${emp}">
          <!-- Errores -->
          <div th:if="${#fields.hasErrors('*')}" class="alert alert-danger" role="alert">
            <strong>Por favor corrija los siguientes errores:</strong>
            <ul>
              <li th:each="err : ${#fields.errors('*')}" th:text="${err}"></li>
            </ul>
          </div>
          <!-- Empno Ename Mgr -->
          <div class="row">
            <!-- Empno -->
            <div class="mb-3 col-4">
              <label for="inputEmpno" class="form-label">Empno</label>
              <input
                type="number"
                min="0"
                class="form-control"
                id="inputEmpno"
                th:field="*{empno}"
                th:readonly="${editMode == 'true'}"
                aria-describedby="empnoHelp"
              />
              <div id="empnoHelp" class="form-text">ID of the Employee</div>
            </div>
            <!-- Ename -->
            <div class="mb-3 col-4">
              <label for="inputEname" class="form-label">Ename</label>
              <input
                type="text"
                class="form-control"
                id="inputEname"
                th:field="*{ename}"
                th:errorclass="is-invalid"
                th:validclass="is-valid"
                aria-describedby="enameHelp"
              />
              <div class="invalid-feedback" th:if="${#fields.hasErrors('ename')}" th:errors="*{ename}"></div>
              <div id="enameHelp" class="form-text">Name of the Employee</div>
            </div>
            <!-- Mgr -->
            <div class="mb-3 col-4">
              <label for="inputMgr" class="form-label">Manager</label>
              <select
                class="form-select"
                aria-label="Default select example"
                id="inputMgr"
                aria-describedby="mgrHelp"
                th:field="*{manager}"
              >
                <option selected value="">No Manager</option>
                <option
                  th:each="m : ${emps}"
                  th:value="${m.empno}"
                  th:text="${m.ename + ' (' + m.empno + ')'}"
                ></option>
              </select>
              <div id="mgrHelp" class="form-text">Manager of the Employee</div>
            </div>
          </div>
          <!-- Job Sal Comm -->
          <div class="row">
            <!-- Job -->
            <div class="mb-3 col-4">
              <label for="inputJob" class="form-label">Job</label>
              <input
                type="text"
                class="form-control"
                id="inputEmpno"
                th:field="*{job}"
                aria-describedby="jobHelp"
              />
              <div id="jobHelp" class="form-text">Job of the Employee</div>
            </div>
            <!-- Sal -->
            <div class="mb-3 col-4">
              <label for="inputSal" class="form-label">Sal</label>
              <input
                type="number"
                min="0"
                step="0.01"
                class="form-control"
                id="inputEmpno"
                th:field="*{sal}"
                aria-describedby="salHelp"
              />
              <div id="salHelp" class="form-text">Salary of the Employee</div>
            </div>
            <!-- Comm -->
            <div class="mb-3 col-4">
              <label for="inputComm" class="form-label">Comm</label>
              <input
                type="number"
                min="0"
                step="0.01"
                class="form-control"
                id="inputComm"
                th:field="*{comm}"
                aria-describedby="commHelp"
              />
              <div id="commHelp" class="form-text">
                Commission of the Employee
              </div>
            </div>
          </div>
          <!-- Deptno Hiredate -->
          <div class="row">
            <!-- Hiredate -->
            <div class="mb-3 col-4">
              <label for="inputComm" class="form-label">Hiredate</label>
              <input
                type="date"
                class="form-control"
                id="inputHireadte"
                th:field="*{hiredate}"
                aria-describedby="hiredateHelp"
              />
              <div id="hiredateHelp" class="form-text">
                Hiredate of the Employee
              </div>
            </div>
            <!-- Deptno -->
            <div class="mb-3 col-4">
              <label for="inputDept" class="form-label">Department</label>
              <select
                class="form-select"
                aria-label="Default select example"
                id="inputDept"
                th:field="*{deptno}"
                aria-describedby="deptHelp"
              >
                <option selected value="">Select Department</option>
                <option
                  th:each="d : ${depts}"
                  th:value="${d.deptno}"
                  th:text="${d.dname + ' (' + d.deptno + ')'}"
                ></option>
              </select>
              <div id="deptHelp" class="form-text">
                Department of the Employee
              </div>
            </div>
          </div>
          <button type="submit" class="btn btn-primary" th:text="${editMode == 'true' ? 'Update Employee' : 'Create Employee'}"></button>
        </form>
      </div>
    </main>

    <div th:replace="~{fragments/footer :: footer}"></div>
    <!-- BootStrap -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
